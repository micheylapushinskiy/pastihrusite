var t,e,i,r,n,o,a,s,l,u,d,h;e={},i={},null==(r=(t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2)&&((r=function(t){if(t in e)return e[t].exports;if(t in i){var r=i[t];delete i[t];var n={id:t,exports:{}};return e[t]=n,r.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},t.parcelRequire94c2=r),r.register,n=r("9FexJ"),o=r("6UUn1"),a=r("edSnU"),s=r("bAx9P"),l=r("lJtih"),u=r("6m8fO"),d=r("1SsJg"),h=r("hoJL5"),new(function(){function t(){var e=this;(0,n._)(this,t),(0,a._)(this,"container",void 0),(0,a._)(this,"modalContainer",void 0),(0,a._)(this,"modalImage",void 0),(0,a._)(this,"modalTitle",void 0),(0,a._)(this,"modal",void 0),(0,a._)(this,"images",[]),(0,a._)(this,"portraits",[]),(0,a._)(this,"COLUMN_COUNT",{DESKTOP:4,MOBILE:2}),this.container=document.querySelector(".Gallery__list"),this.modalContainer=document.querySelector(".Gallery__popup"),this.modalImage=document.querySelector(".Gallery__popup-img"),this.modalTitle=document.querySelector(".Gallery__popup-title"),this.modal=new(u&&u.__esModule?u.default:u)(this.modalContainer),this.portraits=this.normalizePortraits(h.GALLERY_PORTRAITS),window.addEventListener("keyup",function(t){return e.onKeyNavigation(t)}),this.render().then(function(){e.setCssVariables(),e.attachPortraitEvents(),e.hideLastUnevenImages()})}return(0,o._)(t,[{key:"normalizePortraits",value:function(t){return t.map(function(t){return(0,s._)({uuid:(0,d.default)()},t)})}},{key:"onKeyNavigation",value:function(t){var e=this,i=this.modal._isShown&&this.getPortraitByUuid(this.modalContainer.dataset.uuid),r=this.portraits.findIndex(function(t){return t.uuid===i.uuid}),n=function(t){return r+e.COLUMN_COUNT.DESKTOP*t},o=function(t){return r+t},a={ArrowDown:function(){return n(1)},ArrowUp:function(){return n(-1)},ArrowLeft:function(){return o(-1)},ArrowRight:function(){return o(1)}};if(i&&a[t.key]){var s=a[t.key]();s>=this.portraits.length?s=0:s<0&&(s=this.portraits.length-1),this.setModalPortrait(this.portraits[s])}}},{key:"getPortraitByUuid",value:function(t){return this.portraits.find(function(e){return e.uuid===t})}},{key:"render",value:function(){var t=this;return new Promise(function(e){t.container.innerHTML=t.portraits.map(function(t){return`<img src="${t.url}" data-uuid="${t.uuid}">`}).join("\n"),requestAnimationFrame(function(){t.images=(0,l._)(t.container.querySelectorAll("img")),e(t.images)})})}},{key:"attachPortraitEvents",value:function(){var t=this;this.images.forEach(function(e){var i=t.getPortraitByUuid(e.dataset.uuid);e.addEventListener("load",function(){return e.classList.add("loaded")}),e.addEventListener("click",function(){return t.onPortraitClick(i)})})}},{key:"setCssVariables",value:function(){this.container.style.setProperty("--Gallery--img-ratio",h.PORTRAIT_HEIGHT/h.PORTRAIT_WIDTH),this.container.style.setProperty("--Gallery--columns-desktop",this.COLUMN_COUNT.DESKTOP),this.container.style.setProperty("--Gallery--columns-mobile",this.COLUMN_COUNT.MOBILE),this.container.style.setProperty("--Gallery--rows-desktop",Math.floor(this.portraits.length/this.COLUMN_COUNT.DESKTOP)),this.container.style.setProperty("--Gallery--rows-mobile",Math.floor(this.portraits.length/this.COLUMN_COUNT.MOBILE))}},{key:"hideLastUnevenImages",value:function(){var t=this.images.length-this.images.length%this.COLUMN_COUNT.DESKTOP,e=this.images.length-this.images.length%this.COLUMN_COUNT.MOBILE;this.images.slice(t).forEach(function(t){return t.classList.add("ta-hide-desktop")}),this.images.slice(e).forEach(function(t){return t.classList.add("ta-hide-mobile")})}},{key:"onPortraitClick",value:function(t){this.setModalPortrait(t),this.modal.show()}},{key:"setModalPortrait",value:function(t){var e=t.uuid,i=t.url,r=t.title;this.modalContainer.dataset.uuid=e,this.modalImage.src=i,this.modalTitle.textContent=r}}]),t}());
//# sourceMappingURL=gallery-ru.00f9a93c.js.map
